# VK Scraper

Приложение для скрапинга постов из сообществ ВКонтакте с использованием VK API.

## Функциональность

- Создание и управление задачами скрапинга
- Настройка фильтрации постов
- Регулярное обновление данных
- Обновление метрик существующих постов
- Визуализация собранных данных через дашборд
- Автоматическое скачивание медиа-контента (фото, видео, документы)
- Хранение медиа-контента в S3-совместимом хранилище

## Технологический стек

- **Frontend**: React, Material-UI
- **Backend**: Express.js, Node.js
- **База данных**: MongoDB
- **Хранилище файлов**: MinIO (S3-совместимое)
- **Контейнеризация**: Docker

## Установка и запуск

### Предварительные требования

- Docker и Docker Compose
- Сервисный ключ VK API

### Запуск с помощью Docker

1. Клонируйте репозиторий:
   ```
   git clone https://github.com/your-username/vk-scraper.git
   cd vk-scraper
   ```

2. Создайте файл `.env` в корневой директории и добавьте сервисный ключ ВКонтакте:
   ```
   VK_SERVICE_KEY=your_service_key_here
   ```

3. Запустите приложение с помощью Docker Compose:
   ```
   docker-compose up -d
   ```

4. Приложение будет доступно по адресу http://localhost
   S3 Web UI (MinIO Console) будет доступен по адресу http://localhost:9001 (логин: minioadmin, пароль: minioadmin)

### Запуск в режиме разработки

1. Установите зависимости для сервера и клиента:
   ```
   cd server
   npm install
   
   cd ../client
   npm install
   ```

2. Создайте файл `.env` в директории `server` с настройками:
   ```
   PORT=5000
   MONGO_URI=mongodb://localhost:27017/vk_scraper
   VK_SERVICE_KEY=your_service_key_here
   DOWNLOAD_MEDIA=true
   S3_ENDPOINT=http://localhost:9000
   S3_ACCESS_KEY=minioadmin
   S3_SECRET_KEY=minioadmin
   S3_BUCKET=vk-media
   ```

3. Запустите локальное S3-хранилище (MinIO):
   ```
   docker run -p 9000:9000 -p 9001:9001 minio/minio server /data --console-address ":9001"
   ```

4. Запустите сервер в одном терминале:
   ```
   cd server
   npm run dev
   ```

5. Запустите клиент в другом терминале:
   ```
   cd client
   npm start
   ```

6. Приложение будет доступно по адресу http://localhost:3000

## Использование

1. **Создание задачи скрапинга**:
   - Перейдите на страницу "Задачи"
   - Нажмите кнопку "Создать задачу"
   - Укажите имя задачи и ID сообществ ВКонтакте
   - Настройте фильтры и расписание
   - Сохраните задачу

2. **Просмотр постов**:
   - Перейдите на страницу "Посты"
   - Используйте фильтры для поиска нужных постов
   - Просматривайте подробную информацию и метрики

3. **Мониторинг**:
   - На главной странице дашборда отображается статистика по задачам и постам
   - Графики показывают динамику сбора постов и распределение по сообществам

4. **Работа с медиа-контентом**:
   - При скрапинге автоматически скачиваются фото, видео и другие вложения
   - Все медиа-файлы сохраняются в S3-хранилище
   - Просматривайте и скачивайте медиа через интерфейс приложения

5. **Очистка базы данных**:
   - На странице "Посты" используйте кнопку "Очистить базу постов"
   - Подтвердите действие в диалоговом окне

## Лицензия

Этот проект распространяется под лицензией MIT.
